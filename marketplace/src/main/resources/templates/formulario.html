<h2>Subir un nuevo trabajo</h2>
<form action="/registrar-trabajo" method="post">
  <!-- Título -->
  <input type="text" name="titulo" placeholder="Título del trabajo" required>

  <!-- Descripción -->
  <textarea name="descripcion" placeholder="Descripción" required></textarea>

  <!-- URL de Imagen -->
  <input type="text" name="imagenUrl" placeholder="URL de la imagen" required />

  <!-- Categoría -->
  <select name="categoria">
    <option value="Diseño Gráfico">Diseño Gráfico</option>
    <option value="Desarrollo Web">Desarrollo Web</option>
    <option value="Ilustraciones">Ilustraciones</option>
  </select>

  <!-- Precio -->
  <input type="number" name="precio" placeholder="Precio en soles" required step="0.01" min="0">

  <!-- Número de contacto -->
  <input type="tel" name="numeroContacto" placeholder="Número de contacto" required>

  <button type="submit">Guardar Trabajo</button>
</form>



<script>
  document.getElementById("trabajoForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const trabajo = {
      titulo: document.getElementById("titulo").value,
      descripcion: document.getElementById("descripcion").value,
      categoria: document.getElementById("categoria").value,
      imagenUrl: document.getElementById("imagenUrl").value,
      precio: parseFloat(document.getElementById("precio").value) || 0,
      numeroContacto: document.getElementById("numeroContacto").value
    };

fetch("http://localhost:8080/api/trabajos", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify(trabajo)
})
.then(async response => {
  if (response.ok) {
    alert("Trabajo subido con éxito!");
    document.getElementById("trabajoForm").reset();
  } else {
    const errorText = await response.text();
    alert("Error al subir el trabajo: " + errorText);
    console.error("Error detalle:", errorText);
  }
})
.catch(error => {
  alert("Error de red: " + error.message);
  console.error(error);
});
    });
</script>
